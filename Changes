Revision history for pgTAP

0.03
      - Changed `pg_prove` to set `QUIET=1` when it runs, so as to prevent the
        output of extraneous stuff.
      - Added some `GRANT` statements to `plan()` in order to make it easier
        to run tests using roles other than the one that called `plan()`.
        Patch from Rod Taylor.
      - Replaced a call to `lastval()` with a call to `currvall()` in order to
        improve compatibility with PostgreSQL 8.0. Reported by David Westbrook.
      - Added support for TODO tests.
      - Removed the few uses of named parameters and added alias names instead.
        This improves compatibility for versions of PostgreSQL prior to 8.0.
        Reported by David Westbrook.
      - Fixed the plural of "test" in the output from `finish()`. It was
        plural when there was one test and singular otherwise. So I reversed
        that.
      - Moved assignment to declared variables from the `DECLARE` block to the
        body of the functions. Improves compatibility with versions of
        PostgreSQL prior to 8.0. Reported by David Westbrook.
      - Eliminated passing the result of a function call to `RAISE` in order
        to better support older versions of PostgreSQL. Reported by David
        Westbrook.
      - Switched from using `FOUND` to `GET DIAGNOSTICS ROW_COUNT` because the
        former does not seem to b set for `EXECUTE`d SQL in older versions of
        PostgreSQL. Reported by David Westbrook.
      - Added tests specifically targeting PostgreSQL 7.3. From David
        Westbrook.

0.02  2008-06-17T16:26:41
      - Converted the documentation to Markdown.
      - Added pg_prove, a Perl script that use TAP::Harness to run tests and
        report the results, juse like the Perl program `prove`.
      - Fixed `no_plan()` so that it no longer emits a plan, which apparently
        was wrong. Now `finish()` outputs it when there's no plan.
      - Fixed the test script so that it now emits a proper plan.
      - Removed all of the configuration settings from `pgtap.sql`, as they're
        now handled by `pg_prove`. I've mengioned them in the README for
        reference.
      - Added `lives_ok()`.
      - Moved the creation of temporary tables into `plan()`, so that
        everything is properly self-contained.
      - Improved the handling of transactions. Test scripts are now assumed to
        be single transactions with a ROLLBACK at the end. This makes it so
        that test scripts don't have to include `drop_pgtap.sql`.
      - Updated `pg_prove` to rollback on an error, rather than just stop.
        This allows all test functions to be properly rolled back, too, in a
        test script that includes them but then encounters an unhandled
        exception.
      - Updated `pg_prove` to emit an appropriate error message if no test
        scripts are specified.
      - Added a Makefile. It uses the typical PostgreSQL installation
        procedures to install pgTAP. The SQL files have now been turned into
        `.in` templates that are processed by `make`.
      - Added support for schema qualification of test functions. Just set the
        `$TAPSCHEMA` environment variable when running `make`.
      - Added support for standard PostgreSQL-type regression testing by just
        copying the test script, setting some variables inside it, and
        providing an `expected/` directory. The test now lives in the `sql/`
        directory.
      - Changed all instances of `RETURN QUERY SELECT` to `RETURN NEXT`, which
        should allow pgtap to run on versions of PostgreSQL earlier than 8.3.
        Thanks to Niel Conway for the suggestion.

0.01  2008-06-07T05:24:27
      - Initial public release. Announcement at
        http://justatheory.com/computers/databases/postgresql/introducing_pgtap.html
